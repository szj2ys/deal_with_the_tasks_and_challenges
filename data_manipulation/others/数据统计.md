- mean() 均值
- count() 非空观测值数量
- sum() 值的总和
- median() 中位数
- min() 最小值
- max() 最大
- std() 贝塞尔修正样本标准差
- var() 无偏方差
- skew() 样品偏斜度（三阶矩）
- kurt() 样品峰度（四阶矩）
- quantile() 样本分位数（百分位上的值）
- cov() 无偏协方差（二元）
- corr() 相关（二进制）

[groupby、agg、apply、transform过程详解](https://zhuanlan.zhihu.com/p/101284491)



#### 计算当前元素与先前元素的百分比变化
```python
# pct_chage 当前元素与先前元素的百分比变化
df['收盘价(元)'].pct_change(periods=1)
```

#### 计算前一天与后一天收盘价的差值
```python
df['收盘价(元)'].diff()
```

#### 

```python

```


#### 计算salary最大值与最小值之差

```python
df[['salary']].apply(lambda x: x.max() - x.min())
```

#### 以5个数据作为一个数据滑动窗口，在这个5个数据上取均值(收盘价)
```python
df[['收盘价(元)']].rolling(window=5, on='日期' ,min_periods=1).mean()#.plot()
df[['收盘价(元)']].rolling(window=5, on='日期' ,min_periods=1)["成交量"].agg({"amt_sum": np.sum, "amt_mean": np.mean})
df[['收盘价(元)']].rolling(window=5, on='日期' ,min_periods=1)["成交量"].apply(lambda x: sum(x)/100, raw=False)
```
> [rolling和expanding的异同](https://www.jianshu.com/p/b8c795345e93?from=timeline) 

#### 计算开盘价的移动窗口均值

```python
df['开盘价(元)'].expanding(min_periods=1).mean()
```

#### 对salary求平均，对score列求和

```python
df[['salary', 'score']].agg({'salary' : 'mean', 'score': 'sum'})
# 同时对两列进行计算
df[["salary","score"]].agg([np.sum,np.mean,np.min])
```

#### 计算并提取平均薪资最高的区
```python
df.groupby(['district'],as_index=False)['salary'].mean().to_frame(name='平均薪资').sort_values(by='平均薪资', ascending=False)[:10]
```

#### 对商品的下单量进行排序

```python
c = chipo.groupby(['item_name'],as_index=False).agg({'quantity':sum})
c.sort_values(['quantity'],ascending=False,inplace=True)
```

#### 



#### 按周为采样规则，取一周收盘价最大值

```python
df['收盘价(元)'].resample('W', label='left').max()  # W为周，D为天
df.resample('10AS').sum()  # 按十年来求和
df.resample('BM')   # 每个月的最后一天
```


#### 将数据往后移动5天
```python
'''
periods :转移时间数，可正可负，正为向前移动，负为向后移动
axis:轴向
fill_value:对产生的缺失值是否做补充
'''
df.shift(periods=5, axis=0, fill_value=0)
```

#### 统计grammer列每个字符串的长度
```python
df.grammer.apply(lambda x:len(x))
```

#### 统计grammer列中每种编程语言出现的次数
```python
df.grammer.value_counts()
```

#### 查看薪资大于平均薪资的数据
```python
df[df.salary > np.mean(df.salary)]
```


#### 统计`categories`列的空值数量
```python
df.categories.isna().sum()
df.categories.isnull().sum()
```

#### 统计`categories`列的重复值数量
```python
df.categories.duplicated().sum()
```

#### 计算popularity列平均值、中位数
```python
df.popularity.mean()  # 查看平均值
df.popularity.median()  # 查看中位数
```

#### 按列制作数据透视表
```python
pd.pivot_table(df, values=['score', 'salary'], index='positionId')
```

#### 对每种animal的每种不同数量visits，计算平均age，即，返回一个表格，行是aniaml种类，列是visits数量，表格值是行动物种类列访客数量的平均年龄
```python
df.pivot_table(index='animal', columns='visits', values='age', aggfunc='mean')
```


#### 求A列前3大每个值与B的和
```python
df.groupby('A')['B'].nlargest(3).sum(level=0)
```


#### 有列A、B，A的值在1-100（含），对A列每10步长，求对应的B的和
```python
df.groupby(pd.cut(df['A'], np.arange(0, 101, 10)))['B'].sum()
```

#### 滚动求和

```python
df = pd.DataFrame([[2.0, 1.0],
                    [3.0, np.nan],
                    [1.0, 0.0]],
                    columns=list('AB'))
# 默认情况下，迭代行并在每列中查找总和。这相当于axis=None或axis='index'
df.cumsum()

# 要迭代列并在每行中查找总和，请使用 axis=1
df.cumsum(axis=1)
```

#### 计算df中每个种类animal的数量
```python
df['animal'].value_counts()
```

#### 查看education列共有几种学历

```python
df.education.unique()  # 返回具体的值
df['education'].nunique() # 返回数值
```





## 排序

#### 先按age降序排列，后按visits升序排列

```python
df.sort_values(by=['age', 'visits'], ascending=[False, True])
```



#### mysql排序

```python
CREATE TABLE student(course VARCHAR(10), mark int, name varchar(10));

INSERT INTO student VALUES
    ('Maths', 60, 'Thulile'),
    ('Maths', 60, 'Pritha'),
    ('Maths', 70, 'Voitto'),
    ('Maths', 55, 'Chun'),
    ('Biology', 60, 'Bilal'),
    ('Biology', 70, 'Roger');

-- RANK() OVER ，DENSE_RANK() OVER ，ROW_NUMBER() OVER 对比
SELECT
	  course,mark,`name`,
    RANK() OVER (PARTITION BY course ORDER BY mark DESC) AS rank,
    DENSE_RANK() OVER (PARTITION BY course ORDER BY mark DESC) AS dense_rank,
    ROW_NUMBER() OVER (PARTITION BY course ORDER BY mark DESC) AS row_num
from student;

# https://yanghuaiyuan.blog.csdn.net/article/details/108407930
```
#### 

```python

```
#### 

```python

```

#### 

```python

```

#### 

```python

```

